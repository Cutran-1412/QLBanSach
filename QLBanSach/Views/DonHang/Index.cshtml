@model X.PagedList.IPagedList<QLBanSach.Models.DonHang>

@using X.PagedList
@using X.PagedList.Mvc.Core
@using X.PagedList.Web.Common
<style>
    th {
        background-color: #007bff !important;
        color: white !important;
    }

</style>
<div class="d-flex justify-content-between align-items-center mb-3">
    <h2 class="text-primary">Danh sách đơn hàng</h2>

    <form method="get" class="d-flex align-items-center gap-2">
        <input type="hidden" name="id" value="@ViewBag.IdNguoiDung" />

        @{
            string tt = ViewBag.TrangThai as string;
        }

        <select name="trangThai" class="form-select" style="width: 180px;">
            <option value="" selected="@(string.IsNullOrEmpty(tt) ? "selected" : null)">-- Tất cả --</option>
            <option value="Đã đặt hàng" selected="@(tt == "Đã đặt hàng" ? "selected" : null)">Đã đặt hàng</option>
            <option value="Đang giao hàng" selected="@(tt == "Đang giao hàng" ? "selected" : null)">Đang giao hàng</option>
            <option value="Đã nhận hàng" selected="@(tt == "Đã nhận hàng" ? "selected" : null)">Đã nhận hàng</option>
            <option value="Đã hủy" selected="@(tt == "Đã hủy" ? "selected" : null)">Đã hủy</option>
        </select>

        <button class="btn btn-primary">Lọc</button>
    </form>
</div>

<table class="table table-bordered table-hover text-center align-middle">
    <thead class="bg-primary text-white">
        <tr>
            <th>Mã đơn</th>
            <th>Ngày đặt</th>
            <th>Trạng thái</th>
            <th>Tổng tiền</th>
            <th>Chi tiết</th>
        </tr>
    </thead>

    <tbody>
        @foreach (var item in Model)
        {
            <tr>
                <td>@item.MaDonHang</td>
                <td>@item.NgayDat.ToString("dd/MM/yyyy")</td>
                <td>
                    <span class="badge bg-info text-dark px-3 py-2">
                        @item.TrangThai
                    </span>
                </td>
                <td>@item.TongTien.ToString("N0") đ</td>

                <td>
                    <a class="btn btn-sm btn-primary"
                       href="@Url.Action("Detail", "DonHang", new { MaDonHang = item.MaDonHang })">
                        Xem
                    </a>
                </td>
            </tr>
        }
    </tbody>
</table>

<div class="d-flex justify-content-center mt-3">
    @Html.PagedListPager(
        Model,
        page => Url.Action("Index", new {
            page,
            id = ViewBag.IdNguoiDung,
            trangThai = ViewBag.TrangThai
        }),
        new PagedListRenderOptions(){
            LiElementClasses = new[] { "page-item" },
            PageClasses = new[] { "page-link" }
        }
    )
</div>
